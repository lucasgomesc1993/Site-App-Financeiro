{"version":3,"file":"blogService-CkskM1UR.js","sources":["../../lib/supabase.ts","../../services/blogService.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\r\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n    console.warn('Missing Supabase environment variables. Please check your .env file.');\r\n}\r\n\r\nexport const supabase = createClient(\r\n    supabaseUrl || 'https://placeholder.supabase.co',\r\n    supabaseAnonKey || 'placeholder'\r\n);\r\n","import { supabase } from '../lib/supabase';\r\nimport { Post, Category } from '../types/blog';\r\n\r\nexport const blogService = {\r\n    async getPosts(): Promise<Post[]> {\r\n        const { data, error } = await supabase\r\n            .from('posts')\r\n            .select('*, author:authors(*), category:categories(*)')\r\n            .eq('published', true)\r\n            .order('published_at', { ascending: false });\r\n\r\n        if (error) {\r\n            console.error('Error fetching posts:', error);\r\n            return [];\r\n        }\r\n\r\n        return data.map((post: any) => ({\r\n            ...post,\r\n            reading_time: Math.ceil(post.content.split(' ').length / 200)\r\n        })) as Post[];\r\n    },\r\n\r\n    async getPostBySlug(slug: string): Promise<Post | null> {\r\n        const { data, error } = await supabase\r\n            .from('posts')\r\n            .select('*, author:authors(*), category:categories(*)')\r\n            .eq('slug', slug)\r\n            .eq('published', true)\r\n            .single();\r\n\r\n        if (error) {\r\n            console.error(`Error fetching post with slug ${slug}:`, error);\r\n            return null;\r\n        }\r\n\r\n        return {\r\n            ...data,\r\n            reading_time: Math.ceil(data.content.split(' ').length / 200)\r\n        } as Post;\r\n    },\r\n\r\n    async getPostsByCategory(categorySlug: string): Promise<Post[]> {\r\n        const { data, error } = await supabase\r\n            .from('posts')\r\n            .select('*, author:authors(*), category:categories!inner(*)')\r\n            .eq('category.slug', categorySlug)\r\n            .eq('published', true)\r\n            .order('published_at', { ascending: false });\r\n\r\n        if (error) {\r\n            console.error(`Error fetching posts for category ${categorySlug}:`, error);\r\n            return [];\r\n        }\r\n\r\n        return data.map((post: any) => ({\r\n            ...post,\r\n            reading_time: Math.ceil(post.content.split(' ').length / 200)\r\n        })) as Post[];\r\n    },\r\n\r\n    async getAllCategories(): Promise<Category[]> {\r\n        const { data, error } = await supabase\r\n            .from('categories')\r\n            .select('*')\r\n            .order('name');\r\n\r\n        if (error) {\r\n            console.error('Error fetching categories:', error);\r\n            return [];\r\n        }\r\n        return data as Category[];\r\n    }\r\n};\r\n"],"names":[],"mappings":";AAEA,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAMjB,MAAM,WAAW;AAAA,EACpB;AAAA,EACA;AACJ;ACTO,MAAM,cAAc;AAAA,EACvB,MAAM,WAA4B;AAC9B,UAAM,EAAE,MAAM,UAAU,MAAM,SACzB,KAAK,OAAO,EACZ,OAAO,8CAA8C,EACrD,GAAG,aAAa,IAAI,EACpB,MAAM,gBAAgB,EAAE,WAAW,OAAO;AAE/C,QAAI,OAAO;AACP,cAAQ,MAAM,yBAAyB,KAAK;AAC5C,aAAO,CAAA;AAAA,IACX;AAEA,WAAO,KAAK,IAAI,CAAC,UAAe;AAAA,MAC5B,GAAG;AAAA,MACH,cAAc,KAAK,KAAK,KAAK,QAAQ,MAAM,GAAG,EAAE,SAAS,GAAG;AAAA,IAAA,EAC9D;AAAA,EACN;AAAA,EAEA,MAAM,cAAc,MAAoC;AACpD,UAAM,EAAE,MAAM,MAAA,IAAU,MAAM,SACzB,KAAK,OAAO,EACZ,OAAO,8CAA8C,EACrD,GAAG,QAAQ,IAAI,EACf,GAAG,aAAa,IAAI,EACpB,OAAA;AAEL,QAAI,OAAO;AACP,cAAQ,MAAM,iCAAiC,IAAI,KAAK,KAAK;AAC7D,aAAO;AAAA,IACX;AAEA,WAAO;AAAA,MACH,GAAG;AAAA,MACH,cAAc,KAAK,KAAK,KAAK,QAAQ,MAAM,GAAG,EAAE,SAAS,GAAG;AAAA,IAAA;AAAA,EAEpE;AAAA,EAEA,MAAM,mBAAmB,cAAuC;AAC5D,UAAM,EAAE,MAAM,MAAA,IAAU,MAAM,SACzB,KAAK,OAAO,EACZ,OAAO,oDAAoD,EAC3D,GAAG,iBAAiB,YAAY,EAChC,GAAG,aAAa,IAAI,EACpB,MAAM,gBAAgB,EAAE,WAAW,OAAO;AAE/C,QAAI,OAAO;AACP,cAAQ,MAAM,qCAAqC,YAAY,KAAK,KAAK;AACzE,aAAO,CAAA;AAAA,IACX;AAEA,WAAO,KAAK,IAAI,CAAC,UAAe;AAAA,MAC5B,GAAG;AAAA,MACH,cAAc,KAAK,KAAK,KAAK,QAAQ,MAAM,GAAG,EAAE,SAAS,GAAG;AAAA,IAAA,EAC9D;AAAA,EACN;AAAA,EAEA,MAAM,mBAAwC;AAC1C,UAAM,EAAE,MAAM,MAAA,IAAU,MAAM,SACzB,KAAK,YAAY,EACjB,OAAO,GAAG,EACV,MAAM,MAAM;AAEjB,QAAI,OAAO;AACP,cAAQ,MAAM,8BAA8B,KAAK;AACjD,aAAO,CAAA;AAAA,IACX;AACA,WAAO;AAAA,EACX;AACJ;"}