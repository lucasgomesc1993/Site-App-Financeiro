{"version":3,"file":"WebStoryPage-CuvWv2M6.js","sources":["../../components/tools/WebStoryPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ChevronRight, X, Volume2, VolumeX, ChevronLeft, Wallet } from 'lucide-react';\r\nimport { Link, useParams, useNavigate } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport storiesData from '../../data/stories.json';\r\n\r\n// Definição da estrutura de uma história baseada no JSON\r\ninterface StorySlide {\r\n    id: string;\r\n    media: {\r\n        type: 'image' | 'video';\r\n        url: string;\r\n        poster?: string;\r\n    };\r\n    text?: string;\r\n    animation?: string;\r\n    cta?: {\r\n        label: string;\r\n        url: string;\r\n    };\r\n    duration?: number; // em segundos\r\n}\r\n\r\ninterface StoryData {\r\n    slug: string;\r\n    title: string;\r\n    publisher: string;\r\n    publisherLogo: string;\r\n    posterPortrait: string;\r\n    slides: StorySlide[];\r\n}\r\n\r\nexport const WebStoryPage: React.FC = () => {\r\n    const { storyId } = useParams<{ storyId: string }>();\r\n    const navigate = useNavigate();\r\n    const [currentSlideIndex, setCurrentSlideIndex] = useState(0);\r\n    const [isPaused, setIsPaused] = useState(false);\r\n    const [isMuted, setIsMuted] = useState(true);\r\n\r\n    // Encontrar a história pelo slug\r\n    const story = (storiesData as StoryData[]).find(s => s.slug === storyId) || null;\r\n    const currentSlide = story?.slides[currentSlideIndex];\r\n\r\n    useEffect(() => {\r\n        if (!story) return;\r\n        // Reset logic if needed when story changes, but CSS animation handles slide changes automatically via key prop\r\n    }, [story]);\r\n\r\n    const goNext = () => {\r\n        if (story && currentSlideIndex < story.slides.length - 1) {\r\n            setCurrentSlideIndex(prev => prev + 1);\r\n        } else {\r\n            // End of story\r\n            if (window.history.length > 1) {\r\n                navigate(-1);\r\n            } else {\r\n                navigate('/');\r\n            }\r\n        }\r\n    };\r\n\r\n    const goPrev = () => {\r\n        if (currentSlideIndex > 0) {\r\n            setCurrentSlideIndex(prev => prev - 1);\r\n        }\r\n    };\r\n\r\n    if (!story) {\r\n        return (\r\n            <div className=\"min-h-screen bg-black flex items-center justify-center text-white\">\r\n                <p>História não encontrada.</p>\r\n                <Link to=\"/\" className=\"ml-4 text-primary underline\">Voltar</Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black z-50 flex items-center justify-center\">\r\n            <Helmet>\r\n                <title>{story.title} | Web Stories</title>\r\n                <meta name=\"theme-color\" content=\"#000000\" />\r\n                <link rel=\"amphtml\" href={`https://junny.com.br/amp-stories/${story.slug}.html`} />\r\n                <script type=\"application/ld+json\">\r\n                    {JSON.stringify({\r\n                        \"@context\": \"https://schema.org\",\r\n                        \"@type\": \"CreativeWork\",\r\n                        \"headline\": story.title,\r\n                        \"image\": [story.posterPortrait],\r\n                        \"datePublished\": new Date().toISOString(),\r\n                        \"author\": {\r\n                            \"@type\": \"Organization\",\r\n                            \"name\": story.publisher,\r\n                            \"logo\": {\r\n                                \"@type\": \"ImageObject\",\r\n                                \"url\": story.publisherLogo\r\n                            }\r\n                        },\r\n                        \"publisher\": {\r\n                            \"@type\": \"Organization\",\r\n                            \"name\": \"Junny\",\r\n                            \"logo\": {\r\n                                \"@type\": \"ImageObject\",\r\n                                \"url\": \"https://junny.com.br/favicon.ico\"\r\n                            }\r\n                        }\r\n                    })}\r\n                </script>\r\n            </Helmet>\r\n\r\n            {/* Container Mobile (9:16) */}\r\n            <motion.div\r\n                className=\"relative w-full h-full md:w-[400px] md:h-[90vh] md:rounded-2xl overflow-hidden bg-gray-900 shadow-2xl\"\r\n                drag=\"y\"\r\n                dragConstraints={{ top: 0, bottom: 0 }}\r\n                dragElastic={{ top: 0, bottom: 0.6 }}\r\n                onDragEnd={(_, info) => {\r\n                    if (info.offset.y > 100 || info.velocity.y > 200) {\r\n                        if (window.history.length > 1) {\r\n                            navigate(-1);\r\n                        } else {\r\n                            navigate('/');\r\n                        }\r\n                    }\r\n                }}\r\n            >\r\n\r\n                {/* Barras de Progresso */}\r\n                <div className=\"absolute top-4 left-0 w-full px-2 flex gap-1 z-30\">\r\n                    {story.slides.map((slide, index) => (\r\n                        <div key={slide.id} className=\"h-1 flex-1 bg-white/30 rounded-full overflow-hidden\">\r\n                            <div\r\n                                className=\"h-full bg-white\"\r\n                                style={{\r\n                                    width: index < currentSlideIndex ? '100%' : index > currentSlideIndex ? '0%' : 'auto',\r\n                                    animation: index === currentSlideIndex\r\n                                        ? `story-progress ${(currentSlide?.duration || 5)}s linear forwards`\r\n                                        : 'none',\r\n                                    animationPlayState: isPaused ? 'paused' : 'running'\r\n                                }}\r\n                                onAnimationEnd={() => {\r\n                                    if (index === currentSlideIndex) {\r\n                                        goNext();\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Header (Autor) */}\r\n                <div className=\"absolute top-8 left-4 flex items-center gap-2 z-30\">\r\n                    <button\r\n                        onClick={() => {\r\n                            if (window.history.length > 1) {\r\n                                navigate(-1);\r\n                            } else {\r\n                                navigate('/');\r\n                            }\r\n                        }}\r\n                        className=\"text-white\"\r\n                    >\r\n                        <ChevronLeft className=\"w-8 h-8 drop-shadow-md\" />\r\n                    </button>\r\n                    <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center border border-primary/20\">\r\n                        <Wallet className=\"w-4 h-4 text-primary\" />\r\n                    </div>\r\n                    <span className=\"text-white text-sm font-medium drop-shadow-md\">{story.publisher}</span>\r\n                </div>\r\n\r\n                {/* Controles de Fechar/Mute */}\r\n                <div className=\"absolute top-8 right-4 flex gap-4 z-30 text-white\">\r\n                    <button onClick={() => setIsMuted(!isMuted)}>\r\n                        {isMuted ? <VolumeX className=\"w-6 h-6 drop-shadow-md\" /> : <Volume2 className=\"w-6 h-6 drop-shadow-md\" />}\r\n                    </button>\r\n                    <button onClick={() => {\r\n                        if (window.history.length > 1) {\r\n                            navigate(-1);\r\n                        } else {\r\n                            navigate('/');\r\n                        }\r\n                    }}>\r\n                        <X className=\"w-6 h-6 drop-shadow-md\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Área de Toque (Navegação) */}\r\n                <div className=\"absolute inset-0 z-10 flex\">\r\n                    <div\r\n                        className=\"w-1/3 h-full\"\r\n                        onClick={goPrev}\r\n                        onTouchStart={() => setIsPaused(true)}\r\n                        onTouchEnd={() => setIsPaused(false)}\r\n                        onMouseDown={() => setIsPaused(true)}\r\n                        onMouseUp={() => setIsPaused(false)}\r\n                    />\r\n                    <div\r\n                        className=\"w-2/3 h-full\"\r\n                        onClick={goNext}\r\n                        onTouchStart={() => setIsPaused(true)}\r\n                        onTouchEnd={() => setIsPaused(false)}\r\n                        onMouseDown={() => setIsPaused(true)}\r\n                        onMouseUp={() => setIsPaused(false)}\r\n                    />\r\n                </div>\r\n\r\n                {/* Conteúdo do Slide */}\r\n                <AnimatePresence mode='wait'>\r\n                    <motion.div\r\n                        key={currentSlide?.id}\r\n                        initial={{ opacity: 0, scale: 1.05 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        transition={{ duration: 0.4 }}\r\n                        className=\"absolute inset-0 w-full h-full z-20 pointer-events-none\"\r\n                    >\r\n                        {/* Mídia de Fundo */}\r\n                        {currentSlide?.media.type === 'video' ? (\r\n                            <video\r\n                                src={currentSlide.media.url}\r\n                                poster={currentSlide.media.poster}\r\n                                className=\"w-full h-full object-cover\"\r\n                                autoPlay\r\n                                loop\r\n                                muted={isMuted}\r\n                                playsInline\r\n                            />\r\n                        ) : (\r\n                            <img\r\n                                src={currentSlide?.media.url}\r\n                                alt={currentSlide?.text || story.title}\r\n                                className=\"w-full h-full object-cover\"\r\n                            />\r\n                        )}\r\n\r\n                        {/* Overlay Gradiente para Texto */}\r\n                        <div className=\"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/80\" />\r\n\r\n                        {/* Texto e CTA */}\r\n                        <div className=\"absolute bottom-0 left-0 w-full p-6 pb-12 z-10 flex flex-col items-center text-center\">\r\n                            {currentSlide?.text && (\r\n                                <p className=\"text-white text-xl font-bold mb-6 drop-shadow-lg leading-relaxed\">\r\n                                    {currentSlide.text}\r\n                                </p>\r\n                            )}\r\n\r\n                            {currentSlide?.cta && (\r\n                                <motion.div\r\n                                    initial={{ y: 20, opacity: 0 }}\r\n                                    animate={{ y: 0, opacity: 1 }}\r\n                                    transition={{ delay: 0.5 }}\r\n                                >\r\n                                    <Link\r\n                                        to={currentSlide.cta.url.startsWith('https://junny.com.br') ? currentSlide.cta.url.replace('https://junny.com.br', '') : currentSlide.cta.url}\r\n                                        className=\"bg-primary text-black font-bold py-3 px-8 rounded-full shadow-lg hover:scale-105 transition-transform flex items-center gap-2 pointer-events-auto\"\r\n                                    >\r\n                                        {currentSlide.cta.label}\r\n                                        <ChevronRight className=\"w-4 h-4\" />\r\n                                    </Link>\r\n                                </motion.div>\r\n                            )}\r\n                        </div>\r\n                    </motion.div>\r\n                </AnimatePresence>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}